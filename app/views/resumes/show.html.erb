<script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.1/jquery.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/dom-to-image/2.6.0/dom-to-image.min.js"
    integrity="sha256-c9vxcXyAG4paArQG3xk6DjyW/9aHxai2ef9RpMWO44A=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/1.3.5/jspdf.min.js"></script>

<style type="text/css"> * {margin:0; padding:0; text-indent:0; }
 .s1 { color: black; font-family:"Arial Black", sans-serif; font-style: normal; font-weight: normal; text-decoration: none; font-size: 78pt; }
 .s2 { color: black; font-family:Tahoma, sans-serif; font-style: normal; font-weight: normal; text-decoration: none; font-size: 8pt; }
 .s3 { color: black; font-family:Tahoma, sans-serif; font-style: normal; font-weight: normal; text-decoration: none; font-size: 8pt; vertical-align: -4pt; }
 .s4 { color: black; font-family:"Arial Black", sans-serif; font-style: normal; font-weight: normal; text-decoration: none; font-size: 20pt; }
 .s5 { color: black; font-family:Tahoma, sans-serif; font-style: normal; font-weight: normal; text-decoration: none; font-size: 7pt; vertical-align: 1pt; }
 .s6 { color: black; font-family:Tahoma, sans-serif; font-style: normal; font-weight: normal; text-decoration: none; font-size: 8pt; vertical-align: -3pt; }
 .s7 { color: black; font-family:Tahoma, sans-serif; font-style: normal; font-weight: normal; text-decoration: none; font-size: 7pt; }
 .s8 { color: black; font-family:"Arial Black", sans-serif; font-style: normal; font-weight: normal; text-decoration: none; font-size: 15pt; }
 .s9 { color: black; font-family:Tahoma, sans-serif; font-style: normal; font-weight: normal; text-decoration: none; font-size: 7pt; }
 .s10 { color: black; font-family:Tahoma, sans-serif; font-style: normal; font-weight: normal; text-decoration: none; font-size: 10pt; }
 .s11 { color: black; font-family:"Arial Black", sans-serif; font-style: normal; font-weight: normal; text-decoration: none; font-size: 12pt; }
 .s12 { color: black; font-family:"Times New Roman", serif; font-style: normal; font-weight: normal; text-decoration: none; font-size: 10pt; }
 .s13 { color: black; font-family:Arial, sans-serif; font-style: normal; font-weight: normal; text-decoration: none; font-size: 7pt; }
 table, tbody {vertical-align: top; overflow: visible; }
</style>
<div id="content" style="width: fit-content; padding: 30px;">
    <table style="border-collapse:collapse;" cellspacing="0" id="pdf_content">
        <tr style="height:71pt">
            <td style="width:72pt;border-top-style:solid;border-top-width:1pt;border-left-style:solid;border-left-width:1pt;border-bottom-style:solid;border-bottom-width:1pt;border-right-style:solid;border-right-width:1pt">
              <p class="s1" style="padding-left: 11pt;text-indent: 0pt;line-height: 70pt;text-align: left;"><%= @text[0] %></p>
            </td>

            <td style="width:198pt;border-top-style:solid;border-top-width:1pt;border-left-style:solid;border-left-width:1pt;border-bottom-style:solid;border-bottom-width:1pt;border-right-style:solid;border-right-width:1pt">
              <p style="text-indent: 0pt;text-align: left;"></p>
                <div style="padding: 12px; display: flex; padding-left: 64px; text-align: center;">
                  <p class="s2" style="padding-top: 38px;padding-right: 10px;"><%= @text[1] %></p>
                    <div style="padding: 9px;border: 2px solid;">
                      <p class="s2" style=""><%= @text[2] %></p>
                      <p class="s2" style=""><%= @text[3] %></p>
                      <p class="s2" style=""><%= @text[4] %></p>
                      <p class="s2" style=""><%= @text[5] %></p>
                    <div>
                </div>
            </td>
        </tr>
        <tr style="height:26pt">
            <td style="width:270pt;border-top-style:solid;border-top-width:1pt;border-left-style:solid;border-left-width:1pt;border-bottom-style:solid;border-bottom-width:1pt;border-right-style:solid;border-right-width:1pt" colspan="2">
                <p class="s4" style="padding-left: 35pt;text-indent: 0pt;line-height: 25pt;text-align: left;"><%= @text[6] %></p>
            </td>
        </tr>
        <tr style="height:181pt">
            <td style="width:270pt;border-top-style:solid;border-top-width:1pt;border-left-style:solid;border-left-width:1pt;border-bottom-style:solid;border-bottom-width:5pt;border-right-style:solid;border-right-width:1pt" colspan="2">
            <div style="display: flex; justify-content: space-between">
            <div>
                <p class="s2" style="padding-top: 4pt;padding-left: 4pt;text-indent: 0pt;line-height: 9pt;text-align: left;"><%= @text[7] %></p>
                <p class="s6" style="padding-left: 4pt;text-indent: 0pt;line-height: 10px;text-align: left;"><%= @text[8] %>
                <br><span class="s7"><%= @text[10] %></span></p>
                <p class="s2" style="padding-left: 4pt;text-indent: 0pt;text-align: left;"><%= @text[9] %></p></p>
              </div>
                 <div><span class="s5"><%= @text[11] %></span>
                  <p class="s2" style="text-indent: 0pt;line-height: 9pt;text-align: left;"><%= @text[12] %>
            </div>
              </div>
              <p class="s8" style="padding-right: 3pt;text-indent: 0pt;line-height: 21pt;text-align: right;"><%= @text[13] %></p>
                <p class="s9" style="padding-top: 4pt;padding-right: 3pt;text-indent: 0pt;text-align: right;"><%= @text[14] %></p>
                <p style="text-indent: 0pt;text-align: left;"><br/></p>
                <p class="s10" style="padding-top: 7pt;padding-left: 36pt;padding-right: 148pt;text-indent: 0pt;text-align: left;"><%= @text[15] %> <%= @text[16] %></p>
                <p class="s10" style="padding-left: 36pt;text-indent: 0pt;line-height: 12pt;text-align: left;"><%= @text[17] %></p>
                <p class="s10" style="padding-left: 36pt;text-indent: 0pt;line-height: 12pt;text-align: left;"><%= @text[18] %></p>
            </td>
            
        </tr>
        <tr style="height:104pt">
          <td style="width:270pt;border-top-style:solid;border-top-width:5pt;border-left-style:solid;border-left-width:1pt;border-bottom-style:solid;border-bottom-width:5pt;border-right-style:solid;border-right-width:1pt" colspan="2">
            <p class="s11" style="padding-left: 46pt;padding-right: 45pt;text-indent: 0pt;text-align: center; padding-top: 5px;"><%= @text[19] %></p>
            <p class="s12" style="display: flex; justify-content: center; text-indent: 0pt;text-align: left;"><%= image_tag(url_for({:controller => 'resumes', :action => 'show', :format => 'png' }),:class => "barcode" )%></p>
            <p class="s11" style="padding-top: 5pt;text-indent: 0pt;text-align: center; font-size: 15px;"><%= @text[20] %></p>
          </td>
        </tr>
        <tr style="height:21pt">
          <td style="width:270pt;border-top-style:solid;border-top-width:5pt;border-left-style:solid;border-left-width:1pt;border-bottom-style:solid;border-bottom-width:1pt;border-right-style:solid;border-right-width:1pt" colspan="2">
            <p class="s13" style="padding-top: 5pt;text-indent: 0pt;text-align: center; font-size: 11px; font-weight: 600">Download your free personal shopping assistant at me<u>et.shop  </u></p>
          </td>
        </tr>
      </table>
</div>
<button class="btn btn-info" id="downloadPDF">Download PDF</button>      

<script>
$('#downloadPDF').click(function () {
  debugger
    domtoimage.toPng(document.getElementById('content'))
        .then(function (blob) {
            var pdf = new jsPDF("p", "mm", "a4");

            pdf.addImage(blob, 'PNG', 0, 0, 210, 300);
            pdf.save("test.pdf");
        });
});
</script>